#!/usr/bin/env  python
__license__   = 'GPL v3'
__copyright__ = '2008, Kovid Goyal kovid@kovidgoyal.net'
__docformat__ = 'restructuredtext en'

'''
discovermagazine.com
'''

import re
from calibre.web.feeds.news import BasicNewsRecipe

class DiscoverMagazine(BasicNewsRecipe):

    title = u'Discover Magazine'
    description = u'Science, Technology and the Future'
    __author__ = 'Starson17 and Sujata Raman'
    language = 'en'

    oldest_article = 33
    max_articles_per_feed = 20

    no_stylesheets = True
    remove_javascript = True
    use_embedded_content  = False
    linearize_tables = True
    encoding = 'utf-8'

    extra_css = '.headline {font-size: x-large;} \n .fact {padding-top: 10pt}'


    keep_only_tags = [ dict(name='div', attrs={'class':['content']}),]
    remove_tags = [
                   dict(name='div', attrs={'class':['navigation','socialcontainer']}),
                   dict(name='span', attrs={'class':['sociableButton']}),
                   dict(name='p', attrs={'class':'footerBlogResume'}),
                   dict(name='h3', attrs={'id':['comments','respond']}),
                   dict(name='ol', attrs={'class':'commentlist'}),
                   ]

    def postprocess_html(self, soup, first_fetch):

        for tag in soup.findAll(text=re.compile('Related content')):
            tag.parent.extract()

        return soup

    feeds = [
             (u'Technology', u'http://discovermagazine.com/topics/technology/rss.xml'),
             (u'Health - Medicine', u'http://discovermagazine.com/topics/health-medicine/rss.xml'),
             (u'Mind Brain', u'http://discovermagazine.com/topics/mind-brain/rss.xml'),
             (u'Space', u'http://discovermagazine.com/topics/space/rss.xml'),
             (u'Human Origins', u'http://discovermagazine.com/topics/human-origins/rss.xml'),
             (u'Living World', u'http://discovermagazine.com/topics/living-world/rss.xml'),
             (u'Environment', u'http://discovermagazine.com/topics/environment/rss.xml'),
             (u'Physics & Math', u'http://discovermagazine.com/topics/physics-math/rss.xml'),
             (u"20 Things you didn't know about...", u'http://discovermagazine.com/columns/20-things-you-didnt-know/rss.xml'),
             (u'Fuzzy Math', u'http://discovermagazine.com/columns/fuzzy-math/rss.xml'),
             (u'The Brain', u'http://discovermagazine.com/columns/the-brain/rss.xml'),
             (u'What is This', u'http://discovermagazine.com/columns/what-is-this/rss.xml'),
             (u'Vital Signs', u'http://discovermagazine.com/columns/vital-signs/rss.xml'),
             (u'Think Tech', u'http://discovermagazine.com/columns/think-tech/rss.xml'),
             (u'Future Tech', u'http://discovermagazine.com/columns/future-tech/rss.xml'),
             (u'Discover Interview', u'http://discovermagazine.com/columns/discover-interview/rss.xml'),
            ]
