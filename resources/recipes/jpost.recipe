from calibre.web.feeds.news import BasicNewsRecipe

class JerusalemPost(BasicNewsRecipe):

    title       = 'Jerusalem Post'
    description = 'News from Israel and the Middle East'
    use_embedded_content   = False
    language = 'en'

    __author__ = 'Kovid Goyal'
    max_articles_per_feed = 10
    no_stylesheets = True
    remove_tags_before = {'class':'jp-grid-content'}
    remove_tags_after = {'id':'body_val'}

    feeds =  [ ('Front Page', 'http://www.jpost.com/servlet/Satellite?pagename=JPost/Page/RSS&cid=1123495333346'),
               ('Israel News', 'http://www.jpost.com/servlet/Satellite?pagename=JPost/Page/RSS&cid=1178443463156'),
               ('Middle East News', 'http://www.jpost.com/servlet/Satellite?pagename=JPost/Page/RSS&cid=1123495333498'),
               ('International News', 'http://www.jpost.com/servlet/Satellite?pagename=JPost/Page/RSS&cid=1178443463144'),
               ('Editorials', 'http://www.jpost.com/servlet/Satellite?pagename=JPost/Page/RSS&cid=1123495333211'),
          ]

    def preprocess_html(self, soup):
        for x in soup.findAll(name=['form', 'input']):
            x.name = 'div'
        for x in soup.findAll('body', style=True):
            del x['style']
        return soup
