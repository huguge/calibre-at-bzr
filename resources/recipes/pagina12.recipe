
__license__   = 'GPL v3'
__copyright__ = '2008-2010, Darko Miletic <darko.miletic at gmail.com>'
'''
pagina12.com.ar
'''

import time
from calibre import strftime
from calibre.web.feeds.news import BasicNewsRecipe

class Pagina12(BasicNewsRecipe):
    title                 = 'Pagina - 12'
    __author__            = 'Darko Miletic'
    description           = 'Noticias de Argentina y el resto del mundo'
    publisher             = 'La Pagina S.A.'
    category              = 'news, politics, Argentina'
    oldest_article        = 2
    max_articles_per_feed = 100
    no_stylesheets        = True
    encoding              = 'cp1252'
    use_embedded_content  = False
    language              = 'es'
    remove_empty_feeds    = True
    extra_css             = ' body{font-family: sans-serif} '

    conversion_options = {
                          'comment'   : description
                        , 'tags'      : category
                        , 'publisher' : publisher
                        , 'language'  : language
                        }

    remove_tags = [dict(name='div', attrs={'id':['volver','logo','logo_suple','fin','permalink']})]
    

    feeds = [
              (u'Edicion impresa', u'http://www.pagina12.com.ar/diario/rss/principal.xml'   )
             ,(u'Espectaculos'   , u'http://www.pagina12.com.ar/diario/rss/espectaculos.xml')
             ,(u'Radar'          , u'http://www.pagina12.com.ar/diario/rss/radar.xml'       )
             ,(u'Radar libros'   , u'http://www.pagina12.com.ar/diario/rss/libros.xml'      )
             ,(u'Cash'           , u'http://www.pagina12.com.ar/diario/rss/cash.xml'        )
             ,(u'Turismo'        , u'http://www.pagina12.com.ar/diario/rss/turismo.xml'     )
             ,(u'Libero'         , u'http://www.pagina12.com.ar/diario/rss/libero.xml'      )
             ,(u'NO'             , u'http://www.pagina12.com.ar/diario/rss/no.xml'          )
             ,(u'Las/12'         , u'http://www.pagina12.com.ar/diario/rss/las12.xml'       )
             ,(u'Soy'            , u'http://www.pagina12.com.ar/diario/rss/soy.xml'         )
             ,(u'M2'             , u'http://www.pagina12.com.ar/diario/rss/futuro.xml'      )
            ]

    def print_version(self, url):
        return url.replace('http://www.pagina12.com.ar/','http://www.pagina12.com.ar/imprimir/')

    def get_cover_url(self):
        imgnames = ['tapan.jpg','tapagn.jpg','tapan_gr.jpg','tapagn.jpg','tapagn.jpg','tapan.jpg','tapagn.jpg']
        weekday = time.localtime().tm_wday
        return strftime('http://www.pagina12.com.ar/fotos/%Y%m%d/diario/') + imgnames[weekday]
        